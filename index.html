<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
 
   <!-- Run code here in the context of Chapter 17-->

<!doctype html>
<script>
  const results = [
  {name: "Satisfied", count: 1043, color: "lightblue"},
  {name: "Neutral", count: 563, color: "lightgreen"},
  {name: "Unsatisfied", count: 510, color: "pink"},
  {name: "No comment", count: 175, color: "silver"}
  ];
  
  let total = 0;
  for(let i in results){
  total += results[i].count;
  }

  //creating the canvas element
  let canvas = document.createElement('canvas');
  document.body.appendChild(canvas);
  //storing the canvas.getContext in a binding called 'context'
  let context = canvas.getContext('2d');
  //begin outlining the path
  
  //setting centre of pie chart and radius and initialising path
  let startingX = 150;
  let startingY = 75;
  let radius = 50;

  //variables to store dynamic x and y coords
  let x = startingX;
  let y = startingY;
  let angle = Math.PI * -.5;
  for(let i in results){
      console.log(results[i].count);
    //start at the centre, draw the arc, draw a line back to the centre,
    //let .fill() close the path and fill in the closed path / pie slice
    context.beginPath();
    context.moveTo(startingX,startingY);
    context.arc(x,y,radius,angle,angle+(results[i].count/total)*2*Math.PI);
    context.lineTo(x,y);
    context.fillStyle = results[i].color;
    context.fill();
    angle += (results[i].count/total)*2*Math.PI;
  }
</script>

</body>
</html>